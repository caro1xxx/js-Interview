> DNS(Domain Name System)协议工作在**应用层**,提供**主机名到ip地址的转换服务**.

它是一个**由分层的 DNS 服务器组成**的**分布式数据库**，是**定义了主机如何查询**这个分布式数据库的**方式**的应用层协议

ps:分层即指是根据域名一层一层查找,如www.baidu.com

1. 查找本地是否有该域名的缓存
2. 请求根域名服务器,根域名服务器返回**.com的顶级域名服务器的ip列表**
3. 然后本地随机向这个ip列表请求**,.com顶级域名服务器返回**负责**.baidu的权威域名服务器的ip列表**
4. 然后本地又向权威服务器返回的ip列表中的一个ip请求,最后权威域名服务器返回一个**对应的主机名的 IP 地址列表**

#### DNS同时使用TCP & UDP

> DNS占用**53端口**

##### 什么使用使用TCP

DNS在**区域传输**的时候使用TCP协议

* **辅域名**服务器**会定时**（一般3小时）向**主**域名服务器**进行查询**以便了解数据是否有变动.如果有变动,会进行一次**区域传送(数据同步)**

区域传送使用TCP的原因是**一次区域传送的数据量比一次请求应答的数据量大得多**(使用TCP来保证数据的准确性)

##### 什么时候使用UDP

DNS在**域名解析**时使用UDP协议

客户端向DNS服务器查询域名时,一般返回**不会超过512字节,**所有使用UDP即可无需握手(这样DNS服务器负载更低，响应更快)

#### 递归查询&迭代查询

##### 递归查询

> 指本地只需要请求一次,然后DNS服务器会进行递归查询,最后仅返回最终结果

##### 迭代查询

> 指本地服务器按顺序根据DNS服务器返回的ip地址列表进行请求,从而得到最终结果

一般来说,

* 向**本地 DNS 服务器发送请求的方式就是递归查询**

* 本地 DNS 服务器向其他域名服务器请求的过程是**迭代查询的过程**

#### DNS 记录和报文

```bash
（Name，Value，Type，TTL）
```

