优点

* 减少重复数据请求,避免再次通过网络加载资源
* 降低服务器压力
* 加快客户端网页加载速度

##### 协商缓存和强缓存的区别

如果命中强缓存,则不需要给服务器发请求

如果是协商缓存,那么是由*服务器来决定是否缓存*,所以协商缓存客户端和服务端还*存在一次通信*

但是在chrome中的强缓存,*虽然没有实际请求,但是请求的状态码返回200*,协商缓存如果命中则*状态码为304*(不同浏览器策略不同)

##### 请求流程

* 浏览器会获取*资源的header信息*,根据response header的`expires`和`cache-control`来判断是否命中强缓存,如果命中就从缓存中读取

* 反之如果没有命中强缓存,那么浏览器就会发出请求,并且本次请求带上`if-modified-since`或者`if-none-match`,分别*对应*第一次请求返回的`last-modified 或者Etag`

  由*服务器来对比*是否命中,如果*命中就返回304,*且*没有资源*,服务器则读取缓存

  返回如果*没有命中,*那么服务器*返回资源内容,*浏览器*更新header中的字段*

##### 强缓存

浏览器根据response header决定

根据字段:`expires` || `cache-control`

* expires:GMT 格式的*时间点字符串*,表资源*失效的时间*,`绝对时间`
* cache-control:一般常用该字段的 max-age 值来进行判断，`相对时间`,代表资源的有效期是 `N` 秒,下次有效时间过期后,请求资源重写设置有效期

> *Cache-Control 的优先级高于 Expires*

##### 协商缓存

服务器对比决定

根据*两对*属性

```bash
首次请求响应头:Last-Modified 或者 Etag
下次请求请求头: If-Modified-Since或者 If-None-Match
```

* Last-Modified/If-Modified-Since:时间字符串,表*最后文件修改时间*
* Etag/If-None-Match:由*服务器*为每一个资源生成的*唯一标识串*，只要资源有*变化*就这个值就会*改变*

> HTTP 中并*没有指定如何生成 ETag*，可以由开发者*自行生成*，哈希是比较理想的选择