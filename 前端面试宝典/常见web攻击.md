#### XSS
> 跨站脚本攻击,允许攻击者将恶意代码植入到提供给其他用户使用的页面中

> XSS涉及到**三方(攻击者,客户端,Web应用)**

> XSS的攻击目标是为了**盗取存储在客户端的cookie或者其他网站用于识别用户的敏感信息**,一旦获取到,攻击者**将假冒用户与网站进行交互**

```html
<input type="text" value=""><script>alert('XSS');</script>">
<button>搜索</button>
<div>
  您搜索的关键词是："><script>alert('XSS');</script>
</div>
//一旦执行浏览器就会弹出alter
//试想一下如果是获取用户的cooke然后发送到攻击者服务器呢
```

> 根据攻击的来源，`XSS`攻击可以分成：

- 存储型
- 反射型
- DOM 型

##### 存储型

存储型 XSS 的攻击步骤：

1. 攻击者将**恶意代码提交到目标网站的数据库中**
2. 用户打开目标网站时，网站服务端将恶意代码从数据库取出，拼接在 HTML 中返回给浏览器
3. 用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行
4. 恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作

这种攻击常见于带有用户保存数据的网站功能，如论坛发帖、商品评论、用户私信等

##### 反射型

反射型 XSS 的攻击步骤：

1. 攻击者**构造出特殊的 URL**，其中包含恶意代码
2. 用户打开带有恶意代码的 URL 时，网站服务端将恶意代码从 URL 中取出，拼接在 HTML 中返回给浏览器
3. 用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行
4. 恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作

反射型 XSS 跟存储型 XSS 的区别是：存储型 XSS 的恶意代码存在数据库里，反射型 XSS 的恶意代码存在 URL 里。

反射型 XSS 漏洞常见于通过 URL 传递参数的功能，如网站搜索、跳转等。

由于需要用户主动打开恶意的 URL 才能生效，攻击者往往会结合多种手段诱导用户点击。

POST 的内容也可以触发反射型 XSS，只不过其触发条件比较苛刻（需要构造表单提交页面，并引导用户点击），所以非常少见

##### DOM 型

DOM 型 XSS 的攻击步骤：

1. 攻击者构造出特殊的 URL，其中包含恶意代码
2. 用户打开带有恶意代码的 URL
3. 用户浏览器接收到响应后解析执行，前端 JavaScript 取出 URL 中的恶意代码并执行
4. 恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作

DOM 型 XSS 跟前两种 XSS 的区别：**DOM 型 XSS 攻击中，取出和执行恶意代码由浏览器端完成，属于前端 JavaScript 自身的安全漏洞**，**而其他两种 XSS 都属于服务端的安全漏洞**

#### CSRF

> CSRF（Cross-site request forgery）跨站请求伪造：攻击者诱导受害者**进入第三方网站**，在第三方网站中，向被攻击网站发送跨站请求

> 就是诱导用户在恶意网站登录,然后恶意网站实际发生请求的服务器是其他网站的,一旦用户在恶意网站完成操作,恶意网站就获取到了用户的信息

> `csrf`可以通过`get`请求，即通过访问`img`的页面后，浏览器自动访问目标地址，发送请求
>
> 同样，也可以设置一个自动提交的表单发送`post`请求

```html
<form action="http://bank.example/withdraw" method=POST>
    <input type="hidden" name="account" value="xiaoming" />
    <input type="hidden" name="amount" value="10000" />
    <input type="hidden" name="for" value="hacker" />
</form>
<script> document.forms[0].submit(); </script> 
```

##### csrf预防

> 阻止不明外域访问服务器(同源检测,samesite cookie)
>
> 提交时要求附加本域才能获取的信息(CSRF Token,双重cookie验证)

#### SQL注入

> Sql 注入攻击，是通过**将恶意的 `Sql `查询或添加语句插入到应用的输入参数中**，再在后台 `Sql `服务器上解析执行进行的攻击
