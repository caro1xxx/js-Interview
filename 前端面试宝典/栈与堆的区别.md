> 栈(stack)和堆(heap)的两层概念

* 程序内存布局场景下,堆与栈表示**两种内存管理方式**
* 数据结构场景下,堆与栈表示**两种常用的数据结构**

#### 栈

##### 程序内存布局场景

> 栈由操作系统**自动分配释放**,用于存放函数的参数值、局部变量等，其操作方式类似于数据结构中的栈

> 栈的**内存地址生长方向与堆相反**，**由高到底**，所以后定义的变量地址低于先定义的变量

##### 数据结构场景

> 栈是一种运算**受限的线性表**，其限制是指**只仅允许在表的一端进行插入和删除操作**

> 这一端被称为**栈顶**（Top），相对地，把另一端称为**栈底**（Bottom）

> 这种受限的运算使栈拥有“**先进后出**”的特性（First In Last Out），简称**FILO**

#### 堆

##### 程序内存布局场景

> 堆由开**发人员分配和释放**， 若开发人员不释放，程序结束时由 **OS 回收**，**分配方式类似于链表**

> 堆的内存地址生长方向与栈相反，**由低到高**

> **后申请**的内存空间并**不一定**在**先申请**的内存空间的**后面**

##### 关于堆上内存空间的分配过程

> 1.操作系统有一**个记录空闲内存地址的链表**,
>
> 2.当系统收到程序的申请时,会遍历该链表,
>
> 3.寻找**第一个空间大于所申请空间的堆节点**,
>
> 4.然后将该**节点从空间节点链表中删除**,
>
> 5.并将**该节点的空间正式分配给程序**,

> 大多数系统,会在这块内存空间的首地址处记录本次分配的带下,这样,代码的delete语句才能正确的释放本内存空间,由于找到的堆节点的大小不一定正好等于申请的大小,系统会自动将多余的那部分重新放入空闲节点链表
>
> 这个首地址处记录就是让系统能够更加好的回收分配多余的空间

##### 数据结构场景

> 堆是一种常用的**树形结构**，是一种**特殊的完全二叉树**

> 当且仅当满足所有节点的值总是不大于或不小于其父节点的值的完全二叉树被称之为堆。堆的这一特性称之为堆序性。因此，在一个堆中，根节点是最大（或最小）节点。如果根节点最小，称之为小顶堆（或小根堆），如果根节点最大，称之为大顶堆（或大根堆）。堆的左右孩子没有大小的顺序

> 堆的存储一般都用数组来存储堆

#### 堆与栈的区别

* 生长方向不同

* 空间大小不同
* 分配方式不同。**堆都是动态分配的，没有静态分配的堆**,**栈**有2种分配方式：**静态分配和动态分配**
* 管理方式不同
* 分配效率不同,由于**栈是有系统自动分布**,所以会在**硬件层级对栈提供支持**(分配专门的寄存器存放栈的地址，压栈出栈都有专门的指令执行，这就决定了栈的效率比较高),**所以栈就比堆效率高**

​		堆则是由C/C++提供的库函数或运算符来完成申请与管理，实现机制较为复杂，频繁的内存申请容易产生内存碎片。显然，堆的效率比栈要低得多

* 存放内容不同